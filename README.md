# image-bot
Дискорд бот для загрузки картинок с ЯД


## Инструкции

Конфиг - файл в корне **config.yaml** через него осуществляется настройка без вмешательства в код.

### Получение технических ключей
- Для дискорда идем на [Discord Developers](https://discord.com/developers/applications)
    - Создаем нового бота через **New Application**
    - Заходим в бота
    - Идем в **Bot** -> **Add_Bot**
    - Идем в **Oauth** в **Scopes** - **Bot**, в **Bot Permissions** выбираем права **View Channel** и **Send Messages**
    Выше в **Scopes** сформируется ссылка для приглашения бота на канал
    - Во вкладке **General Information** берем **Application ID**, кладем в конфиге в **app_id**
    - Во вкладке **Bot** берем **Token**, кладем в конфиге в **app_token**
- Для яндекса идем на [oauth yandex](https://oauth.yandex.ru/)
    - Регистрируем новое приложение
    - В разделе **Платформы** Выбираем **Вебсервисы** и нажимаем на **Подставить URL для разработки**
    - В разделе **Доступы** -> **Яндекс.Диск REST API** все галочки
    - Создать
    - Вставить ID и пароль в соответствующие поля конфига
    - Перейти по ссылке (заменить ID на свой) -> https://oauth.yandex.ru/authorize?response_type=token&client_id=идентификатор-приложения
    - Вставить полученный токен в конфиг

### Запуск
- Скачать последнюю версию [python](https://www.python.org/downloads/windows/)
- При установке убедиться что стоит галочка в пункте **add to path**
- Скачать бот
- Установить зависимости:
    - Открыть командную строку (набрать cmd в поиске windows)
    - Открыть папку с ботом командой **cd <путь-к-папке>**
    - Ввести команду **pip install -r requirements.txt** для установки всех требуемых библиотек
- Запустить бот
    - Cнова перейти в командной строке в папку с ботом
    - Ввести команду python bot.py
    - Запустить через батник, если нужно чтобы работал в фоне (не тестировалось)
    
### Особенности бота
Вся настройка осуществляется через файл **config.yaml**, основной функционал бот выполняет автоматически

Бот дополнительно реагируется на 3 команды:
- !stop - приостановка публикаций по рассписанию, бот продолжает работать
- !start - возобновление работы после приостановки
- !get_token - для ЯД невозможно создать вечный токен для работы с ним, его необходимо обновлять раз в год.
По команде в **командную строку** будет выведена ссылка для получения нового токена